<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini City Game</title>

<style>
body {
  margin: 0;
  overflow: hidden;
  background: #87ceeb;
  touch-action: none;
  font-family: Arial;
}

#hud {
  position: fixed;
  top: 10px;
  left: 10px;
  color: white;
  background: rgba(0,0,0,0.6);
  padding: 10px;
  z-index: 100;
}

#modeBtn {
  position: fixed;
  bottom: 20px;
  left: 20px;
  padding: 10px;
  background: black;
  color: white;
  z-index: 100;
}

#game {
  position: relative;
  width: 2000px;
  height: 2000px;
  background: #4caf50;
}

.road {
  position: absolute;
  background: #333;
}

.building {
  position: absolute;
  width: 120px;
  height: 120px;
  background: #666;
}

.ad {
  position: absolute;
  bottom: 5px;
  left: 5px;
  right: 5px;
  height: 22px;
  background: yellow;
  font-size: 11px;
  text-align: center;
  line-height: 22px;
}

.coin {
  position: absolute;
  width: 20px;
  height: 20px;
  background: gold;
  border-radius: 50%;
}

#player {
  position: absolute;
  width: 40px;
  height: 40px;
  background: red;
  border-radius: 6px;
  z-index: 10;
}
</style>
</head>

<body>

<div id="hud">
  Coins: <span id="coins">0</span><br>
  Mission: Collect 5 coins
</div>

<button id="modeBtn">üöó Car Mode</button>

<div id="game">
  <div id="player"></div>
</div>

<script>
let game = document.getElementById("game");
let player = document.getElementById("player");
let coinsUI = document.getElementById("coins");
let modeBtn = document.getElementById("modeBtn");

let px = 500, py = 500;
let speed = 2;
let mode = "car";
let coins = 0;

player.style.left = px + "px";
player.style.top = py + "px";

/* ROADS */
for (let i = 0; i < 6; i++) {
  let r = document.createElement("div");
  r.className = "road";
  r.style.width = "2000px";
  r.style.height = "80px";
  r.style.top = (i * 300 + 200) + "px";
  game.appendChild(r);
}

/* BUILDINGS */
for (let i = 0; i < 12; i++) {
  let b = document.createElement("div");
  b.className = "building";
  b.style.left = Math.random()*1800 + "px";
  b.style.top = Math.random()*1800 + "px";

  let ad = document.createElement("div");
  ad.className = "ad";
  ad.innerText = "Sponsored";

  b.appendChild(ad);
  game.appendChild(b);
}

/* COINS */
function spawnCoin() {
  let c = document.createElement("div");
  c.className = "coin";
  c.style.left = Math.random()*1800 + "px";
  c.style.top = Math.random()*1800 + "px";
  game.appendChild(c);
}
for (let i = 0; i < 10; i++) spawnCoin();

/* TOUCH MOVE */
let tx, ty;
document.addEventListener("touchstart", e => {
  tx = e.touches[0].clientX;
  ty = e.touches[0].clientY;
});

document.addEventListener("touchmove", e => {
  let dx = e.touches[0].clientX - tx;
  let dy = e.touches[0].clientY - ty;

  px += dx * speed * (mode === "plane" ? 1.5 : 1);
  py += dy * speed * (mode === "plane" ? 1.5 : 1);

  player.style.left = px + "px";
  player.style.top = py + "px";

  game.style.transform =
    `translate(${-px + innerWidth/2}px, ${-py + innerHeight/2}px)`;

  checkCoins();

  tx = e.touches[0].clientX;
  ty = e.touches[0].clientY;
});

/* COIN COLLISION */
function checkCoins() {
  document.querySelectorAll(".coin").forEach(c => {
    let cx = c.offsetLeft;
    let cy = c.offsetTop;
    if (Math.abs(px - cx) < 25 && Math.abs(py - cy) < 25) {
      c.remove();
      coins++;
      coinsUI.innerText = coins;
      spawnCoin();
    }
  });
}

/* MODE SWITCH */
modeBtn.onclick = () => {
  if (mode === "car") {
    mode = "plane";
    player.style.background = "blue";
    modeBtn.innerText = "‚úàÔ∏è Plane Mode";
  } else {
    mode = "car";
    player.style.background = "red";
    modeBtn.innerText = "üöó Car Mode";
  }
};
</script>

</body>
  </html>
